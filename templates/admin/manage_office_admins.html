{% extends "admin/adminbase.html" %} {% block title %}Create Office Admin -
KapiyuGuide Admin{% endblock %} {% block content %}
<div class="bg-white p-6 rounded-lg shadow-md mb-6">
  <div class="flex justify-between items-center mb-6">
    <div>
      <h1 class="text-2xl font-bold text-blue-800">Create Office Admin</h1>
      <p class="text-gray-600">Add a new admin to manage an office</p>
    </div>
    <div>
      <a
        href="{{ url_for('admin.office_stats') }}"
        class="text-blue-600 hover:text-blue-800"
      >
        <i class="fas fa-arrow-left mr-1"></i> Back to Office Statistics
      </a>
    </div>
  </div>

  <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
    <!-- Form Card -->
    <div class="col-span-1 lg:col-span-2">
      <div class="bg-white p-6 rounded-lg shadow-md border border-gray-200">
        <h2 class="text-lg font-semibold text-gray-800 mb-4">
          Admin Information
        </h2>

        <form
          method="POST"
          action="{{ url_for('admin.manage_office_admins') }}"
          class="space-y-6"
          id="createAdminForm"
        >
          <input type="hidden" name="csrf_token" value="{{ csrf_token() }}" />

          <!-- Personal Information Section -->
          <div class="p-4 bg-gray-50 rounded-lg border border-gray-200 mb-6">
            <h3 class="font-medium text-gray-700 mb-3">Personal Information</h3>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
              <div>
                <label
                  for="first_name"
                  class="block text-sm font-medium text-gray-700 mb-1"
                  >First Name *</label
                >
                <input
                  type="text"
                  id="first_name"
                  name="first_name"
                  required
                  class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"
                />
              </div>

              <div>
                <label
                  for="last_name"
                  class="block text-sm font-medium text-gray-700 mb-1"
                  >Last Name *</label
                >
                <input
                  type="text"
                  id="last_name"
                  name="last_name"
                  required
                  class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"
                />
              </div>

              <div>
                <label
                  for="middle_name"
                  class="block text-sm font-medium text-gray-700 mb-1"
                  >Middle Name</label
                >
                <input
                  type="text"
                  id="middle_name"
                  name="middle_name"
                  class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"
                />
              </div>

              <div>
                <label
                  for="email"
                  class="block text-sm font-medium text-gray-700 mb-1"
                  >Email Address *</label
                >
                <input
                  type="email"
                  id="email"
                  name="email"
                  required
                  class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"
                />
              </div>
            </div>
          </div>

          <!-- Account Information Section -->
          <div class="p-4 bg-gray-50 rounded-lg border border-gray-200 mb-6">
            <h3 class="font-medium text-gray-700 mb-3">Account Information</h3>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
              <div>
                <label
                  for="password"
                  class="block text-sm font-medium text-gray-700 mb-1"
                  >Password *</label
                >
                <input
                  type="password"
                  id="password"
                  name="password"
                  required
                  class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"
                />
                <p class="mt-1 text-sm text-gray-500">
                  Temporary password for first login
                </p>
              </div>

              <div>
                <label
                  for="password_confirm"
                  class="block text-sm font-medium text-gray-700 mb-1"
                  >Confirm Password *</label
                >
                <input
                  type="password"
                  id="password_confirm"
                  name="password_confirm"
                  required
                  class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"
                />
              </div>
            </div>
          </div>

          <!-- Office Assignment Section -->
          <div class="p-4 bg-gray-50 rounded-lg border border-gray-200">
            <h3 class="font-medium text-gray-700 mb-3">Office Assignment</h3>

            <div>
              <label
                for="office_id"
                class="block text-sm font-medium text-gray-700 mb-1"
                >Assign to Office *</label
              >
              <select
                id="office_id"
                name="office_id"
                required
                class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"
              >
                <option value="">Select an office</option>
                {% for office in offices %}
                <option value="{{ office.id }}">{{ office.name }}</option>
                {% endfor %}
              </select>
            </div>
          </div>

          <div class="flex items-center justify-end space-x-3 pt-4">
            <button
              type="button"
              onclick="window.location.href='{{ url_for('admin.office_stats') }}'"
              class="px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"
            >
              Cancel
            </button>
            <button
              type="submit"
              class="px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"
            >
              Create Admin
            </button>
          </div>
        </form>
      </div>
    </div>

    <!-- Help Card -->
    <div class="col-span-1">
      <div
        class="bg-white p-6 rounded-lg shadow-md border border-gray-200 mb-6"
      >
        <h3 class="text-lg font-semibold text-gray-800 mb-4">
          Admin Guidelines
        </h3>

        <div class="text-gray-600 space-y-4">
          <div class="flex items-start">
            <div class="flex-shrink-0 h-5 w-5 text-blue-500 mt-0.5">
              <i class="fas fa-info-circle"></i>
            </div>
            <div class="ml-3">
              <p>
                Office admins will have access to manage all inquiries and
                counseling sessions for their assigned office.
              </p>
            </div>
          </div>

          <div class="flex items-start">
            <div class="flex-shrink-0 h-5 w-5 text-blue-500 mt-0.5">
              <i class="fas fa-envelope"></i>
            </div>
            <div class="ml-3">
              <p>
                The admin will receive an email with login instructions once
                their account is created.
              </p>
            </div>
          </div>

          <div class="flex items-start">
            <div class="flex-shrink-0 h-5 w-5 text-blue-500 mt-0.5">
              <i class="fas fa-shield-alt"></i>
            </div>
            <div class="ml-3">
              <p>
                Ensure the admin is trained on privacy policies before granting
                access.
              </p>
            </div>
          </div>

          <div class="flex items-start">
            <div class="flex-shrink-0 h-5 w-5 text-blue-500 mt-0.5">
              <i class="fas fa-user-clock"></i>
            </div>
            <div class="ml-3">
              <p>
                Account will become active only after the admin's first login.
              </p>
            </div>
          </div>
        </div>
      </div>

      <div class="bg-white p-6 rounded-lg shadow-md border border-gray-200">
        <h3 class="text-lg font-semibold text-gray-800 mb-4">
          Admin Permissions
        </h3>

        <div class="space-y-3">
          <div class="flex items-center">
            <div class="h-4 w-4 rounded-full bg-green-500 mr-2"></div>
            <span class="text-gray-700">Reply to student inquiries</span>
          </div>

          <div class="flex items-center">
            <div class="h-4 w-4 rounded-full bg-green-500 mr-2"></div>
            <span class="text-gray-700">Schedule counseling sessions</span>
          </div>

          <div class="flex items-center">
            <div class="h-4 w-4 rounded-full bg-green-500 mr-2"></div>
            <span class="text-gray-700">Post office announcements</span>
          </div>

          <div class="flex items-center">
            <div class="h-4 w-4 rounded-full bg-green-500 mr-2"></div>
            <span class="text-gray-700">View office statistics</span>
          </div>

          <div class="flex items-center">
            <div class="h-4 w-4 rounded-full bg-red-500 mr-2"></div>
            <span class="text-gray-700">Cannot manage other offices</span>
          </div>

          <div class="flex items-center">
            <div class="h-4 w-4 rounded-full bg-red-500 mr-2"></div>
            <span class="text-gray-700"
              >Cannot create other admin accounts</span
            >
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %} {% block extra_js %}
<script>
  document.addEventListener("DOMContentLoaded", function () {
    // Simple password validation - just check if passwords match
    const passwordInput = document.getElementById("password");
    const confirmInput = document.getElementById("password_confirm");
    const form = document.querySelector("form");

    function validatePasswordMatch() {
      if (passwordInput.value !== confirmInput.value) {
        confirmInput.setCustomValidity("Passwords don't match");
      } else {
        confirmInput.setCustomValidity("");
      }
    }

    passwordInput.addEventListener("change", validatePasswordMatch);
    confirmInput.addEventListener("keyup", validatePasswordMatch);

    // Form submission validation - only check if passwords match
    form.addEventListener("submit", function (event) {
      if (passwordInput.value !== confirmInput.value) {
        event.preventDefault();
        alert("Passwords do not match.");
      }
    });

    // Handle flash message fadeout
    const flashMessage = document.getElementById("flashMessage");
    if (flashMessage) {
      setTimeout(function () {
        flashMessage.style.opacity = "0";
        setTimeout(function () {
          flashMessage.style.display = "none";
        }, 500);
      }, 5000);
    }
  });
</script>
{% endblock %}
